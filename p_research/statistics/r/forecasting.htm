<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html dir="ltr" xml:lang="es" lang="es" xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<!-- METADATOS -->
		<title>Juan Antonio Breña Moral, ICAI, Ingeniero en Organizacion Industrial, Ingeniero Técnico en Informática de gestión</title>
		<meta name="title" content="Juan Antonio Breña Moral, ICAI, Ingeniero en Organizacion Industrial, Ingeniero Técnico en Informática de gestión">
		<meta name="DC.Title" content="Juan Antonio Breña Moral, ICAI, Ingeniero en Organizacion Industrial, Ingeniero Técnico en Informática de gestión">
		<meta http-equiv="title" content="Juan Antonio Breña Moral, ICAI, Ingeniero en Organizacion Industrial, Ingeniero Técnico en Informática de gestión">

		<!-- KEYWORDS -->
		<meta name="keywords" content="Juan Antonio Breña Moral, Breña, Ingeniero en Organizacion Industrial, Organizacion Industrial, ICAI, ICADE, Universidad Pontificia de Comillas, Madrid, Cuenca, Marketing, R, Stat Engine, Desarrollo Web, Consultoria Web, XML, LAMP, J2EE, .NET, Data Mining, Mineria de Datos, Analisis de datos, SAS, SPSS, Web, Paginas web, Direccion de empresas">
		<meta http-equiv="keywords" content="Juan Antonio Breña Moral, Breña, Ingeniero en Organizacion Industrial, Organizacion Industrial, ICAI, ICADE, Universidad Pontificia de Comillas, Madrid, Cuenca, Marketing, R, Stat Engine, Desarrollo Web, Consultoria Web, XML, LAMP, J2EE, .NET, Data Mining, Mineria de Datos, Analisis de datos, SAS, SPSS, Web, Paginas web, Direccion de empresas">

		<!-- DESCRIPCION -->
		<meta name="description" content="Página personal del Ingeniero Juan Antonio Breña Moral. Actualmente investiga en Marketing Avanzado, Dirección de empresas, R y Minería de datos">
		<meta http-equiv="description" content="Página personal del Ingeniero Juan Antonio Breña Moral. Actualmente investiga en Marketing Avanzado, Dirección de empresas, R y Minería de datos">
		<meta http-equiv="DC.Description" content="Página personal del Ingeniero Juan Antonio Breña Moral. Actualmente investiga en Marketing Avanzado, Dirección de empresas, R y Minería de datos">

		<!-- OTROS METADATOS -->
		<meta name="VW96.objecttype" content="Document">
		<META NAME="DC.Language" SCHEME="RFC1766" CONTENT="Spanish">
		<meta name="distribution" content="global">
		<meta name="resource-type" content="document">

		<!-- SEARCH ENGINE -->
		<meta name="robots" content="all">

		<!-- CACHE -->
		<meta http-equiv="cache-control" content="no-cache" />
		<meta http-equiv="pragma" content="no-cache" />
		<meta http-equiv="expires" content="0" />

		<!-- JAVASCRIPT -->
		<script src="../../../r_javascript/esmeta/loader/LoaderClass_c.js" type="text/javascript" language="JavaScript"></script>
		<script language="JavaScript" type="text/javascript">
			<!--
				// LoaderClass esta basado en la tecnologia Dynapi 2.
				LoaderClass.setLibraryPath('../../../r_javascript/');
				LoaderClass.include('esmeta.forms.ComboManagerClass.js');
				LoaderClass.include('esmeta.helpers.HelperClass.js');
				LoaderClass.include('esmeta.http.requestHttpClass.js');
				LoaderClass.include('esmeta.mvc.WebPageControllerClass.js');
				//LoaderClass.include('esmeta.misc.EmailBuilderClass.js');
				//LoaderClass.include('esmeta.misc.AuthorClass.js');
			// -->
		</script>
		<!-- CARGA DE CLASE QUE MANEJA PAGINA -->
		<script src="RControllerClass.js" type="text/javascript" language="JavaScript"></script>
		<script type="text/javascript" language="JavaScript">
			<!--
				//Web Page Controller Object
				WPCObject = new RControllerClass();
				// Manejo de evento de carga.
				window.onload = WPCObject.window_onLoad;
				// Manejo de evento de errores.
				//window.onerror = WPCObject.window_onError;
			// -->S
		</script>

		<link rel="stylesheet" href="../../../r_css/jab_contents.css" type="text/css" />
		<link rel="stylesheet" href="../../../r_css/typography.css" type="text/css" />

		<!-- ICONO -->
		<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	</head>
	<body>
		<form name="frmNavigationHelper" id="frmNavigationHelper" action="#">
			<input type="hidden" name="wpSite" id="wpSite" value="Juanantonio.info" />
			<input type="hidden" name="wpArea" id="wpArea" value="R & D" />
			<input type="hidden" name="wpTitle" id="wpTitle" value="Time Series Forecasting" />
		</form>
		<div align="center" id="frame">
			<!-- NIVEL 1: Logo -->
			<table width="760" cellpadding="0" cellspacing="0" border="0">
				<tr>
					<td class="n1t1f1c1">
						<a href="#" onclick="WPCObject.logo_onClick()" name="top">
							<img src="../../../r_media/imagenes/jabLogo2003.gif" width="207" height="60" alt="" border="0" />
						</a>
					</td>
					<td><img src="../../../r_media/imagenes/pixel_transparente.gif" width="1" height="150" alt="" /></td>
				</tr>
			</table>
			<div id="n2">
				<table width="100%" cellpadding="0" cellspacing="0" border="0">
					<tr>
						<td valign="middle" align="left" class="t1f1c1">
							<span class="t2">
									<script type="text/javascript" language="JavaScript">
										var helperObject = new HelperClass();
										helperObject.writeTitle();
									</script>
							</span>
						</td>
	
						<td valign="middle" align="right" class="t1f1c2">
							<form action="#" method="post" name="frmNavigation" onsubmit="return WPCObject.frmNavigation_onSubmit(this)">
								<select class="cbNavigation" onchange="WPCObject.cbNavigation_onChange(this)" name="cbNavigation" id="cbNavigation">
									<script type="text/javascript" language="JavaScript">
										WPCObject.writeNavigationSystem();
									</script>
								</select>
							</form>
						</td>
					</tr>
				</table>
			</div>
			<div id="n4">
				<table cellpadding="0" cellspacing="0" border="0" width="100%" class="contenidos">
					<tr>
						<!-- MENU DE NAVEGACION -->
						<td class="MENU_CONTENIDOS">
							<span class="t6">
								<h2>Contents</h2>
								
								<script>
								WPCObject.writeRMenu();
								</script>
								
								<br />
								
								<b><a href="../../research.htm">Go back</a></b>
							</span>
							<!-- <div align="right"><b><a href="../../research.htm">Go back</a></b></div> -->
						</td>
						<td class="t2f2c1">
							<span class="t6">
							<h2>Time Series forecasting with R</h2>
<p>
The first step to make any prediction with a Time Series, is look up your data.
</p>
<p>
The data used in this document are "airpass" 
</p>
<p>
Load this piece of code to see the form of your data.
</p>
<pre>
###################################
# DATA ANALYSIS SCRIPT            #
# Autor: Juan Antonio Breña Moral #
# Email: bren@juanantonio.info    #
###################################

#Function used to load libraries
#FORECAST PACKAGES: www-personal.buseco.monash.edu.au/~hyndman/Rlibrary/forecast/
LOAD_LIBRARIES <- function(){
	library("forecast") 
}

INSTALL_LIBRARIES <- function(){
	install.packages("forecast");
	install.packages("tseries");
}
  
# Funcion que genera el mensaje de cabecera.
HEADER <-function(){
	cat("\n::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::")
	cat("\n:: TIME SERIES FORECASTING | AUTHOR: Juan Antonio Breña Moral   ::")
	cat("\n:: VERSION: 2006-07-09 | DOWNLOADS: http://www.juanantonio.info ::")
	cat("\n:: EMAIL: bren@juanantonio.info                                 ::")
	cat("\n::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::")
	cat("\n:: DESCRIPTION:                                                 ::")
	cat("\n:: Without description (2006.07.09)                             ::")
	cat("\n::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::\n")
}

JAB.PREDICTION.EDA <- function(DATOS){
    par(mfrow= c(3,1));
    hist(DATOS, probability =T);
    lines(density(DATOS));
    boxplot(DATOS, horizontal=T);
    qqnorm(DATOS);
    abline(0,1,col="red")
    par(mfrow= c(1,1)); 
}

#FROM: http://tolstoy.newcastle.edu.au/R/help/99b/0171.html
mykurtosis <- function(x) { 
    m4 <- mean((x-mean(x))^4) 
    kurt <- m4/(sd(x)^4)-3 
    kurt 
} 

myskewness <- function(x) { 
    m3 <- mean((x-mean(x))^3) 
    skew <- m3/(sd(x)^3) 
    skew 
} 

JAB.PREDICTION.EDA_TABLE <- function(DATAS){
	COLUMN_NAMES <- c("MEAN","MEDIAN","SD","KURTOSIS","SKEWNESS");
	DATA <- c();
	DATA[1] <- mean(DATAS);
	DATA[2] <- median(DATAS);
	DATA[3] <- sd(DATAS);
	DATA[4] <- mykurtosis(DATAS);
	DATA[5] <- myskewness(DATAS);
	names(DATA) <- COLUMN_NAMES;
	
	print("JAB: EDA VIEW 1.0")
	print(DATA);
	stem(DATAS);
}

JAB.PREDICTION.NORMAL_TESTS <- function(DATAS){
COLUMN_NAMES <- c("SHAPIRO","ANDERSON-DARLING",
"CRAMER-VON MISES","KS","JARQUE-BERA");
	DATA <- c();
	DATA[1] <- shapiro.test(DATAS)$p.value;
	DATA[2] <- ad.test(DATAS)$p.value;
	DATA[3] <- cvm.test(DATAS)$p.value;
	DATA[4] <- lillie.test(DATAS)$p.value;
	DATA[5] <- jarque.bera.test(DATAS)$p.value;
	names(DATA) <- COLUMN_NAMES;
	
	print("JAB: NORMAL TEST TABLE 1.0")
	print(DATA);
}
</pre>
<pre class="results">
LOAD_LIBRARIES();
data(airpass);
DATA <- airpass;

JAB.PREDICTION.EDA(DATA);
JAB.PREDICTION.EDA_TABLE(DATA);
JAB.PREDICTION.NORMAL_TESTS(DATA);
</pre>
<a href="ts_images/EDA_2.gif" target="blank"><img src="ts_images/EDA_2.gif" width="580"/></a><br />
<pre class="results">
[1] "JAB: EDA VIEW 1.0"
       MEAN      MEDIAN          SD    KURTOSIS    SKEWNESS 
280.2986111 265.5000000 119.9663169  -0.4298441   0.5710676 

  1 | 011222223333344444
  1 | 55555566677777788888889999
  2 | 0000000112333333344444444
  2 | 6667777778889
  3 | 00111111222224444
  3 | 5555666666666799
  4 | 00011111222234
  4 | 66677779
  5 | 114
  5 | 56
  6 | 12

[1] "JAB: NORMAL TEST TABLE 1.0"
     SHAPIRO ANDERSON-DARLING CRAMER-VON MISES               KS      JARQUE-BERA 
6.832743e-05     1.137693e-04     5.996618e-04     1.017376e-03     1.154777e-02
</pre>
<p>
The seasonal form of the data is multiplicative, then when you make your predictions, use "multiplicative" propertie
</p>
<pre>
JAB.TIMESERIES.FORECASTISTING <- function(DATA,PERIODOS_PREDICCION){
    DATA.FORECAST <- pegels(DATA, model="ZZZ", h=PERIODOS_PREDICCION, 
    transform="none",bootstrap="parametric", initialization=3)
    plot(DATA.FORECAST);
}
</pre>
<pre class="results">
JAB.TIMESERIES.FORECASTISTING(DATA,12);
</pre>
<a href="ts_images/FORECAST1.gif" target="blank"><img src="ts_images/FORECAST1.gif" width="580"/></a><br />
<!-- GO TOP -->
<div align="right"><b><a href="#top">Top</a></b></div>


							</span>
						</td>
					</tr>
				</table>
			</div>
			<div id="footer">
				<div id="lbFooter">
					<table width="720" cellpadding="0" cellspacing="0" border="0">
						<tr>
							<td align="left" class="t6">
								<script type="text/javascript" language="JavaScript">
									WPCObject.writeFooter();
								</script>							
							</td>
							<td align="right" class="t6">
								<script type="text/javascript" language="JavaScript">
									WPCObject.writeLastModified();
								</script>							
							</td>
						</tr>
					</table>
				</div>
			</div>
		</div>
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-343143-1";
urchinTracker();
</script>
	</body>
</html>
