<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html dir="ltr" xml:lang="es" lang="es" xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<!-- METADATOS -->
		<title>Juan Antonio Breña Moral, ICAI, Ingeniero en Organizacion Industrial, Ingeniero Técnico en Informática de gestion</title>
		<meta name="title" content="Juan Antonio Breña Moral, ICAI, Ingeniero en Organización Industrial, Ingeniero Técnico en Informática de gestión">
		<meta name="DC.Title" content="Juan Antonio Breña Moral, ICAI, Ingeniero en Organización Industrial, Ingeniero Técnico en Informática de gestión">
		<meta http-equiv="title" content="Juan Antonio Breña Moral, ICAI, Ingeniero en Organización Industrial, Ingeniero Técnico en Informática de gestión">

		<!-- KEYWORDS -->
		<meta name="keywords" content="Juan Antonio Breña Moral, Breña, Ingeniero en Organizacion Industrial, Organizacion Industrial, ICAI, ICADE, Universidad Pontificia de Comillas, Madrid, Cuenca, Marketing, R, Stat Engine, Desarrollo Web, Consultoria Web, XML, LAMP, J2EE, .NET, Data Mining, Mineria de Datos, Analisis de datos, SAS, SPSS, Web, Paginas web, Direccion de empresas">
		<meta http-equiv="keywords" content="Juan Antonio Breña Moral, Breña, Ingeniero en Organizacion Industrial, Organizacion Industrial, ICAI, ICADE, Universidad Pontificia de Comillas, Madrid, Cuenca, Marketing, R, Stat Engine, Desarrollo Web, Consultoria Web, XML, LAMP, J2EE, .NET, Data Mining, Mineria de Datos, Analisis de datos, SAS, SPSS, Web, Paginas web, Direccion de empresas">

		<!-- DESCRIPCION -->
		<meta name="description" content="Página personal del Ingeniero Juan Antonio Breña Moral. Actualmente investiga en Marketing Avanzado, Dirección de empresas, R y Minería de datos">
		<meta http-equiv="description" content="Página personal del Ingeniero Juan Antonio Breña Moral. Actualmente investiga en Marketing Avanzado, Dirección de empresas, R y Minería de datos">
		<meta http-equiv="DC.Description" content="Página personal del Ingeniero Juan Antonio Breña Moral. Actualmente investiga en Marketing Avanzado, Dirección de empresas, R y Minería de datos">

		<!-- OTROS METADATOS -->
		<meta name="VW96.objecttype" content="Document">
		<META NAME="DC.Language" SCHEME="RFC1766" CONTENT="Spanish">
		<meta name="distribution" content="global">
		<meta name="resource-type" content="document">

		<!-- SEARCH ENGINE -->
		<meta name="robots" content="all">

		<!-- CACHE -->
		<meta http-equiv="cache-control" content="no-cache" />
		<meta http-equiv="pragma" content="no-cache" />
		<meta http-equiv="expires" content="0" />

		<!-- JAVASCRIPT -->
		<script src="../../../r_javascript/esmeta/loader/LoaderClass_c.js" type="text/javascript" language="JavaScript"></script>
		<script language="JavaScript" type="text/javascript">
			<!--
				// LoaderClass esta basado en la tecnologia Dynapi 2.
				LoaderClass.setLibraryPath('../../../r_javascript/');
				LoaderClass.include('esmeta.forms.ComboManagerClass.js');
				LoaderClass.include('esmeta.helpers.HelperClass.js');
				LoaderClass.include('esmeta.http.requestHttpClass.js');
				LoaderClass.include('esmeta.mvc.WebPageControllerClass.js');
			// -->
		</script>
		<!-- CARGA DE CLASE QUE MANEJA PAGINA -->
		<script src="../roboticsControllerClass.js" type="text/javascript" language="JavaScript"></script>
		<script src="r2lControllerClass.js" type="text/javascript" language="JavaScript"></script>
		<script type="text/javascript" language="JavaScript">
			<!--
				//Web Page Controller Object
				WPCObject = new r2lControllerClass();
				// Manejo de evento de carga.
				window.onload = WPCObject.window_onLoad;
				// Manejo de evento de errores.
				//window.onerror = WPCObject.window_onError;
			// -->
		</script>
		
		<link rel="stylesheet" href="../r_css/jab_contents.css" type="text/css" />
		<link rel="stylesheet" href="../r_css/typography.css" type="text/css" />

		<!-- ICONO -->
		<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	</head>
	<body>
		<form name="frmNavigationHelper" id="frmNavigationHelper" action="#">
			<input type="hidden" name="wpSite" id="wpSite" value="Juanantonio.info" />
			<input type="hidden" name="wpArea" id="wpArea" value="R & D" />
			<input type="hidden" name="wpTitle" id="wpTitle" value="NXT, Lego Mindstorm" />
		</form>
		<div align="center" id="frame">
			<!-- NIVEL 1: Logo -->
			<table width="760" cellpadding="0" cellspacing="0" border="0">
				<tr>
					<td class="n1t1f1c1">
						<a href="#" onclick="WPCObject.logo_onClick()" name="top">
							<img src="../../../r_media/imagenes/jabLogo2003.gif" width="207" height="60" alt="" border="0" />
						</a>
					</td>
					<td><img src="../../../r_media/imagenes/pixel_transparente.gif" width="1" height="150" alt="" /></td>
				</tr>
			</table>
			<div id="n2">
				<table width="100%" cellpadding="0" cellspacing="0" border="0">
					<tr>
						<td valign="middle" align="left" class="t1f1c1">
							<span class="t2">
									<script type="text/javascript" language="JavaScript">
										var helperObject = new HelperClass();
										helperObject.writeTitle();
									</script>
							</span>
						</td>
						<td valign="middle" align="right" class="t1f1c2">
							<form action="#" method="post" name="frmNavigation" onsubmit="return WPCObject.frmNavigation_onSubmit(this)">
								<select class="cbNavigation" onchange="WPCObject.cbNavigation_onChange(this)" name="cbNavigation" id="cbNavigation">
									<script type="text/javascript" language="JavaScript">
										WPCObject.writeNavigationSystem();
									</script>
								</select>
							</form>
						</td>
					</tr>
				</table>
			</div>
			<div id="n4">
				<table cellpadding="0" cellspacing="0" border="0" width="100%" class="contenidos">
					<tr>
						<!-- MENU DE NAVEGACION -->
						<td class="MENU_CONTENIDOS" valign="top">
							<img src="../../../r_media/images/pixel_transparente.gif" width="1" height="10" /><br />
							<span class="t6">
								<h2>Contents</h2>
								
								<script>
								WPCObject.writeMenuLevel2();
								</script>
								
								<br />
								
								<b><a href="../robotics.htm">Go back</a></b>
							</span>
							<!-- <div align="right"><b><a href="../../research.htm">Go back</a></b></div> -->
						</td>
						<td class="t2f2c1">
							<img src="../../../r_media/images/pixel_transparente.gif" width="1" height="10" /><br />
							<span class="t6">
							<h2>NXT #</h2>
<p>
I have developed this area, because I need to use a High Level Programming Languaje to develop the AI to control my NXT bots.
</p>
<p>
Currently (2006/10/05), any NXT user can use Java, Ruby, Perl & .NET to control the NXT brick. 
At present, I have decided to test with C# using the libraries developed by Bram Fokke.
 You can visit her web site to know NXT#. <a href="http://nxtsharp.fokke.net/" target="blank" onclick="javascript:urchinTracker('NXT/NXT#')">http://nxtsharp.fokke.net/</a>
</p>
<p>
My first example using NXT#, is a class to control my bot ECT:
</p>
<pre>
/*
 * Creado por SharpDevelop.
 * Usuario: JAB
 * Fecha: 06/10/2006
 * Hora: 23:54
 * 
 */

using System.Windows.Forms;

using System;
using Bram.Lego;
using Bram.Utilities;

namespace bren.robotics
{
	/// <summary>
	/// This class in c# models a ECT, Esmeta Control Tower.
	/// this bot has 2 nxt motors and an a ultrasonic sensor.
	/// </summary>
	public class ECT
	{

		//NXT phisical objects.
		private NxtBrick nxtBrick1;
		private NxtMotor nxtMotorA;//Gyroscope Motor
		private NxtMotor nxtMotorC;//SAZLR Motor
		private NxtSonar nxtSonar4;//Eyes (For Version ECT1)
			
		/// <summary>
		/// Set / Get methods about COM_PORT
		/// </summary>
        private string NXT_COM_PORT;
       	public void SetNXT_COM_PORT(string COM_PORT){
       		this.NXT_COM_PORT = COM_PORT;
        }
      	public string GetNXT_COM_PORT(string COM_PORT){
       		return this.NXT_COM_PORT;
        }

       	//Logic Object
       	private string ULTRASONIC_MEASURE;
       	
       	private bool NXTBrickConnected = false;
      	public bool GetNXTBrickConnected(){
       		return this.NXTBrickConnected;
        }
       	
       	
		public void run()
        {
       	
			//Brick Class definition
			this.nxtBrick1 = new NxtBrick();
            this.nxtBrick1.AutoPoll = true;
            this.nxtBrick1.COMPortName = this.NXT_COM_PORT;
            this.nxtBrick1.MotorA = nxtMotorA;
            this.nxtBrick1.MotorB = null;
            this.nxtBrick1.MotorC = nxtMotorC;
            this.nxtBrick1.Sensor1 = null;
            this.nxtBrick1.Sensor2 = null;
            this.nxtBrick1.Sensor3 = null;
            this.nxtBrick1.Sensor4 = nxtSonar4;
            
            this.nxtMotorA = new NxtMotor();
            this.nxtMotorA.Brick = this.nxtBrick1;
            this.nxtMotorA.Flip = false;
            this.nxtMotorA.Port = Bram.Lego.NxtMotorPort.PortA;
            
            this.nxtMotorC = new NxtMotor();
            this.nxtMotorC.Brick = this.nxtBrick1;
            this.nxtMotorC.Flip = false;
            this.nxtMotorC.Port = Bram.Lego.NxtMotorPort.PortC;
            
            this.nxtSonar4 = new NxtSonar();
            this.nxtSonar4.Brick = this.nxtBrick1;
            this.nxtSonar4.AutoPoll = false;

			//this.nxtSonar4.AutoPollDelay = 0;
            this.nxtSonar4.Port = Bram.Lego.NxtSensorPort.Port4;
            this.nxtSonar4.ValueChanged += 
            new Bram.Lego.SensorEvent(this.nxtSonar4_ValueChanged);
            
 
 			try{
 				this.nxtBrick1.Connect();
				this.NXTBrickConnected = true;
            // Statement which can cause an exception.
            }catch(System.IO.IOException){
            	//MessageBox.Show("Exception occured");
 				this.NXTBrickConnected = false;
            }finally{}
        }
		
		public void turnleft(){
		    int motorForce = -10;
            int rotation =20;//(degrees);           
            this.nxtMotorC.Turn(motorForce, rotation);	
            //this.nxtMotorC.Brake();
		}

		public void turnright(){
		    int motorForce = 10;
            int rotation =20;//(degrees);           
            
            this.nxtMotorC.Turn(motorForce, rotation);
            //this.nxtMotorC.Brake();
		}
		
		public void getSonarMeasure(){
		this.nxtSonar4.Poll();
		MessageBox.Show(this.nxtSonar4.LastPollTimestamp.ToString());
		MessageBox.Show(this.ULTRASONIC_MEASURE);
		MessageBox.Show(this.nxtSonar4.LastResult.ScaledValue.ToString());
		MessageBox.Show(this.nxtSonar4.RawValue.ToString());
		MessageBox.Show(this.nxtSonar4.LastResult.CalibratedValue.ToString());
		MessageBox.Show(this.nxtSonar4.LastResult.Calibrated.ToString());
		MessageBox.Show(this.nxtSonar4.LastResult.Mode.ToString());
		MessageBox.Show(this.nxtSonar4.LastResult.RawAD.ToString());
		MessageBox.Show(this.nxtSonar4.LastResult.Valid.ToString());
		}
		
		private void nxtSonar4_ValueChanged(NxtSensor sensor) {
		this.ULTRASONIC_MEASURE = nxtSonar4.LastResult.ScaledValue.ToString();
		}
		
		public void disconnectECT(){
			this.nxtBrick1.Disconnect();
		}
		
		/// <summary>
		/// This method allow to shoot a Sphere with SAZLR System
		/// </summary>
		public void shoot(){
		    int motorForce = 100;
            int rotation =360;//(degrees);           
            
            this.nxtMotorA.Turn(motorForce, rotation);
		}
	}
}

</pre>
<p>
<b>2006/10/11</b><br />
I can use Ultrasonic Sensor.
</p>
<p>
I have created a PC Interface to use this class
</p>
<img src="images/ECT_form.jpg" />
<p>
If you want to download this program, you can download <a href="downloads/ECT4.zip" target="_blank" onclick="javascript:urchinTracker('NXT/NXTSHARP/DOWNLOADS/ECT')">here</a>
</p>
<p>
To learn the API of NXT# I recommend to study the class of the library.
</p>
<ul>
	<li><a href="nxtsharp_source/0.2/NxtBrick.txt" target="_blank" onclick="javascript:urchinTracker('NXT/NXTSHARP/BRICK')">NxtBrick.txt</a></li>
	<li><a href="nxtsharp_source/0.2/NxtMotor.txt" target="_blank" onclick="javascript:urchinTracker('NXT/NXTSHARP/MOTOR')">NxtMotor.txt</a></li>
	<li><a href="nxtsharp_source/0.2/NxtSensor.txt" target="_blank" onclick="javascript:urchinTracker('NXT/NXTSHARP/SENSOR')">NxtSensor.txt</a></li>
	<li><a href="nxtsharp_source/0.2/NxtSonar.txt" target="_blank" onclick="javascript:urchinTracker('NXT/NXTSHARP/SONAR')">NxtSonar.txt</a></li>


</ul>
<!-- GO TOP -->
<div align="right"><b><a href="#top">Top</a></b></div><br />


							</span>
						</td>
					</tr>
				</table>
			</div>
			<div id="footer">
				<div id="lbFooter">
					<table width="720" cellpadding="0" cellspacing="0" border="0">
						<tr>
							<td align="left" class="t6">
								<script type="text/javascript" language="JavaScript">
									WPCObject.writeFooter();
								</script>							
							</td>
							<td align="right" class="t6">
								<script type="text/javascript" language="JavaScript">
									WPCObject.writeLastModified();
								</script>							
							</td>
						</tr>
					</table>
				</div>
			</div>
		</div>
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-343143-1";
urchinTracker();
</script>
	</body>
</html>
